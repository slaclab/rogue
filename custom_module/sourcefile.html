

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Custom Module Source &mdash; Rogue v6.6.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=16afd591"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Building The Custom Module" href="makefile.html" />
    <link rel="prev" title="Creating Custom Modules" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Rogue
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installing/index.html">Installing &amp; Compiling Rogue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pyrogue_tree/index.html">PyRogue Tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interfaces/index.html">Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities/index.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/index.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocols/index.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging/index.html">Logging In Rogue</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Creating Custom Modules</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Custom Module Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="makefile.html">Building The Custom Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="wrapper.html">Wrapping Custom Module With PyRogue Device</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing The Custom Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pydm/index.html">Using the PyDM Gui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration/index.html">Migration Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Rogue</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Creating Custom Modules</a></li>
      <li class="breadcrumb-item active">Custom Module Source</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/custom_module/sourcefile.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="custom-module-source">
<span id="custom-sourcefile"></span><h1>Custom Module Source<a class="headerlink" href="#custom-module-source" title="Link to this heading">ÔÉÅ</a></h1>
<p>The following is an example source code file for a custom module which implements
a custom stream transmitter and receiver as described in stream interfaces
documentation. This source code expands the example to expose status variables
to the Python layer. Instructions for wrapping these modules in PyRogue Devices
are included in <a class="reference internal" href="wrapper.html#custom-wrapper"><span class="std std-ref">Wrapping Custom Module With PyRogue Device</span></a>.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../interfaces/stream/sending.html#interfaces-stream-sending"><span class="std std-ref">Sending Frames</span></a></p></li>
<li><p><a class="reference internal" href="../interfaces/stream/receiving.html#interfaces-stream-receiving"><span class="std std-ref">Receiving Frames</span></a></p></li>
</ul>
<p>This module is compiled with the <a class="reference internal" href="makefile.html#custom-makefile"><span class="std std-ref">Building The Custom Module</span></a> described in this section.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Source</span> <span class="k">for</span> <span class="n">MyModule</span><span class="o">.</span><span class="n">cpp</span>

<span class="c1">#include &lt;rogue/interfaces/stream/Slave.h&gt;</span>
<span class="c1">#include &lt;rogue/interfaces/stream/Master.h&gt;</span>
<span class="c1">#include &lt;rogue/interfaces/stream/Frame.h&gt;</span>
<span class="c1">#include &lt;rogue/interfaces/stream/FrameLock.h&gt;</span>
<span class="c1">#include &lt;rogue/interfaces/stream/FrameIterator.h&gt;</span>

<span class="o">//</span> <span class="n">Custom</span> <span class="n">stream</span> <span class="n">slave</span> <span class="k">class</span>
<span class="nc">class</span> <span class="n">MyCustomSlave</span> <span class="p">:</span> <span class="n">public</span> <span class="n">rogue</span><span class="p">::</span><span class="n">interfaces</span><span class="p">::</span><span class="n">stream</span><span class="p">::</span><span class="n">Slave</span> <span class="p">{</span>

      <span class="o">//</span> <span class="n">Total</span> <span class="n">frame</span> <span class="n">counter</span><span class="p">,</span> <span class="n">exposed</span> <span class="n">to</span> <span class="n">Python</span>
      <span class="n">uint32_t</span> <span class="n">frameCount_</span><span class="p">;</span>

      <span class="o">//</span> <span class="n">Total</span> <span class="n">byte</span> <span class="n">count</span><span class="p">,</span> <span class="n">exposed</span> <span class="n">to</span> <span class="n">Python</span>
      <span class="n">uint32_t</span> <span class="n">byteCount_</span><span class="p">;</span>

   <span class="n">public</span><span class="p">:</span>

      <span class="o">//</span> <span class="n">Create</span> <span class="n">a</span> <span class="n">static</span> <span class="k">class</span><span class="w"> </span><span class="nc">creator</span> <span class="n">to</span> <span class="k">return</span> <span class="n">our</span> <span class="n">custom</span> <span class="k">class</span><span class="w"> </span><span class="nc">wrapped</span> <span class="k">with</span> <span class="n">a</span> <span class="n">shared</span> <span class="n">pointer</span>
      <span class="n">static</span> <span class="n">boost</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">MyCustomSlave</span><span class="o">&gt;</span> <span class="n">create</span><span class="p">()</span> <span class="p">{</span>
         <span class="n">static</span> <span class="n">boost</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">MyCustomSlave</span><span class="o">&gt;</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">boost</span><span class="p">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">MyCustomSlave</span><span class="o">&gt;</span><span class="p">();</span>
         <span class="k">return</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="o">//</span> <span class="n">Return</span> <span class="n">received</span> <span class="n">frame</span> <span class="n">counter</span>
      <span class="n">uint32_t</span> <span class="n">getFrameCount</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">return</span> <span class="n">frameCount_</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">//</span> <span class="n">Return</span> <span class="n">total</span> <span class="nb">bytes</span> <span class="n">received</span>
      <span class="n">uint32_t</span> <span class="n">getTotalBytes</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">return</span> <span class="n">byteCount_</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="n">MyCustomSlave</span><span class="p">()</span> <span class="p">:</span> <span class="n">rogue</span><span class="p">::</span><span class="n">interfaces</span><span class="p">::</span><span class="n">stream</span><span class="p">::</span><span class="n">Slave</span><span class="p">()</span> <span class="p">{</span>
         <span class="n">frameCount_</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
         <span class="n">byteCount_</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">//</span> <span class="n">Receive</span> <span class="n">a</span> <span class="n">frame</span>
      <span class="n">void</span> <span class="n">acceptFrame</span> <span class="p">(</span> <span class="n">boost</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">rogue</span><span class="p">::</span><span class="n">interfaces</span><span class="p">::</span><span class="n">stream</span><span class="p">::</span><span class="n">Frame</span><span class="o">&gt;</span> <span class="n">frame</span> <span class="p">)</span> <span class="p">{</span>

         <span class="o">//</span> <span class="n">Acquire</span> <span class="n">lock</span> <span class="n">on</span> <span class="n">frame</span><span class="o">.</span> <span class="n">Will</span> <span class="n">be</span> <span class="n">release</span> <span class="n">when</span> <span class="n">lock</span> <span class="k">class</span><span class="w"> </span><span class="nc">goes</span> <span class="n">out</span> <span class="n">of</span> <span class="n">scope</span>
         <span class="n">rogue</span><span class="p">::</span><span class="n">interfaces</span><span class="p">::</span><span class="n">stream</span><span class="p">::</span><span class="n">FrameLockPtr</span> <span class="n">lock</span> <span class="o">=</span> <span class="n">frame</span><span class="o">-&gt;</span><span class="n">lock</span><span class="p">();</span>

         <span class="o">//</span> <span class="n">Increment</span> <span class="n">frame</span> <span class="n">counter</span>
         <span class="n">frameCount_</span><span class="o">++</span><span class="p">;</span>

         <span class="o">//</span> <span class="n">Increment</span> <span class="n">byte</span>  <span class="n">counter</span>
         <span class="n">byteCount_</span> <span class="o">+=</span> <span class="n">frame</span><span class="o">-&gt;</span><span class="n">getPayload</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="o">//</span> <span class="n">Expose</span> <span class="n">methods</span> <span class="n">to</span> <span class="n">python</span>
      <span class="n">static</span> <span class="n">void</span> <span class="n">setup_python</span><span class="p">()</span> <span class="p">{</span>
         <span class="n">boost</span><span class="p">::</span><span class="n">python</span><span class="p">::</span><span class="n">class_</span><span class="o">&lt;</span><span class="n">MyCustomSlave</span><span class="p">,</span> <span class="n">boost</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">MyCustomSlave</span><span class="o">&gt;</span><span class="p">,</span>
                                              <span class="n">boost</span><span class="p">::</span><span class="n">python</span><span class="p">::</span><span class="n">bases</span><span class="o">&lt;</span><span class="n">rogue</span><span class="p">::</span><span class="n">interfaces</span><span class="p">::</span><span class="n">stream</span><span class="p">::</span><span class="n">Slave</span><span class="o">&gt;</span><span class="p">,</span>
                                              <span class="n">boost</span><span class="p">::</span><span class="n">noncopyable</span> <span class="o">&gt;</span><span class="p">(</span><span class="s2">&quot;MyCustomSlave&quot;</span><span class="p">,</span>
                                              <span class="n">boost</span><span class="p">::</span><span class="n">python</span><span class="p">::</span><span class="n">init</span><span class="o">&lt;&gt;</span><span class="p">())</span>
            <span class="o">.</span><span class="n">def</span><span class="p">(</span><span class="s2">&quot;getFrameCount&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">MyCustomSlave</span><span class="p">::</span><span class="n">getFrameCount</span><span class="p">)</span>
            <span class="o">.</span><span class="n">def</span><span class="p">(</span><span class="s2">&quot;getTotalBytes&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">MyCustomSlave</span><span class="p">::</span><span class="n">getTotalBytes</span><span class="p">)</span>
         <span class="p">;</span>
         <span class="n">boost</span><span class="p">::</span><span class="n">python</span><span class="p">::</span><span class="n">implicitly_convertible</span><span class="o">&lt;</span><span class="n">boost</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">MyCustomSlave</span><span class="o">&gt;</span><span class="p">,</span>
                                              <span class="n">rogue</span><span class="p">::</span><span class="n">interfaces</span><span class="p">::</span><span class="n">stream</span><span class="p">::</span><span class="n">SlavePtr</span><span class="o">&gt;</span><span class="p">();</span>
      <span class="p">};</span>
<span class="p">};</span>

<span class="o">//</span> <span class="n">Custom</span> <span class="n">stream</span> <span class="n">master</span> <span class="k">class</span>
<span class="nc">class</span> <span class="n">MyCustomMaster</span> <span class="p">:</span> <span class="n">public</span> <span class="n">rogue</span><span class="p">::</span><span class="n">interfaces</span><span class="p">::</span><span class="n">stream</span><span class="p">::</span><span class="n">Master</span> <span class="p">{</span>

      <span class="o">//</span> <span class="n">Total</span> <span class="n">frame</span> <span class="n">counter</span><span class="p">,</span> <span class="n">exposed</span> <span class="n">to</span> <span class="n">Python</span>
      <span class="n">uint32_t</span> <span class="n">frameCount_</span><span class="p">;</span>

      <span class="o">//</span> <span class="n">Total</span> <span class="n">byte</span> <span class="n">count</span><span class="p">,</span> <span class="n">exposed</span> <span class="n">to</span> <span class="n">Python</span>
      <span class="n">uint32_t</span> <span class="n">byteCount_</span><span class="p">;</span>

      <span class="o">//</span> <span class="n">Frame</span> <span class="n">size</span> <span class="n">configuration</span>
      <span class="n">uint32_t</span> <span class="n">frameSize_</span><span class="p">;</span>

   <span class="n">public</span><span class="p">:</span>

      <span class="o">//</span> <span class="n">Create</span> <span class="n">a</span> <span class="n">static</span> <span class="k">class</span><span class="w"> </span><span class="nc">creator</span> <span class="n">to</span> <span class="k">return</span> <span class="n">our</span> <span class="n">custom</span> <span class="k">class</span><span class="w"> </span><span class="nc">wrapped</span> <span class="k">with</span> <span class="n">a</span> <span class="n">shared</span> <span class="n">pointer</span>
      <span class="n">static</span> <span class="n">boost</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">MyCustomMaster</span><span class="o">&gt;</span> <span class="n">create</span><span class="p">()</span> <span class="p">{</span>
         <span class="n">static</span> <span class="n">boost</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">MyCustomMaster</span><span class="o">&gt;</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">boost</span><span class="p">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">MyCustomMaster</span><span class="o">&gt;</span><span class="p">();</span>
         <span class="k">return</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="o">//</span> <span class="n">Standard</span> <span class="k">class</span><span class="w"> </span><span class="nc">creator</span> <span class="n">which</span> <span class="ow">is</span> <span class="n">called</span> <span class="n">by</span> <span class="n">create</span>
      <span class="n">MyCustomMaster</span><span class="p">()</span> <span class="p">:</span> <span class="n">rogue</span><span class="p">::</span><span class="n">interfaces</span><span class="p">::</span><span class="n">stream</span><span class="p">::</span><span class="n">Master</span><span class="p">()</span> <span class="p">{</span>
         <span class="n">frameCount_</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
         <span class="n">byteCount_</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
         <span class="n">frameSize_</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">//</span> <span class="n">Return</span> <span class="n">received</span> <span class="n">frame</span> <span class="n">counter</span>
      <span class="n">uint32_t</span> <span class="n">getFrameCount</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">return</span> <span class="n">frameCount_</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">//</span> <span class="n">Return</span> <span class="n">total</span> <span class="nb">bytes</span> <span class="n">received</span>
      <span class="n">uint32_t</span> <span class="n">getTotalBytes</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">return</span> <span class="n">byteCount_</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">//</span> <span class="n">Set</span> <span class="n">frame</span> <span class="n">size</span>
      <span class="n">void</span> <span class="n">setFrameSize</span><span class="p">(</span><span class="n">uint32_t</span> <span class="n">size</span><span class="p">)</span> <span class="p">{</span>
         <span class="n">frameSize_</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">//</span> <span class="n">Get</span> <span class="n">frame</span> <span class="n">size</span>
      <span class="n">uint32_t</span> <span class="n">getFrameSize</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">return</span> <span class="n">frameSize_</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">//</span> <span class="n">Generate</span> <span class="ow">and</span> <span class="n">send</span> <span class="n">a</span> <span class="n">frame</span>
      <span class="n">void</span> <span class="n">myFrameGen</span><span class="p">()</span> <span class="p">{</span>
         <span class="n">rogue</span><span class="p">::</span><span class="n">interfaces</span><span class="p">::</span><span class="n">stream</span><span class="p">::</span><span class="n">FramePtr</span> <span class="n">frame</span><span class="p">;</span>
         <span class="n">rogue</span><span class="p">::</span><span class="n">interfaces</span><span class="p">::</span><span class="n">stream</span><span class="p">::</span><span class="n">FrameIterator</span> <span class="n">it</span><span class="p">;</span>
         <span class="n">uint32_t</span> <span class="n">x</span><span class="p">;</span>

         <span class="o">//</span> <span class="n">Here</span> <span class="n">we</span> <span class="n">request</span> <span class="n">a</span> <span class="n">frame</span> <span class="n">capable</span> <span class="n">of</span> <span class="n">holding</span> <span class="mi">100</span> <span class="nb">bytes</span>
         <span class="n">frame</span> <span class="o">=</span> <span class="n">reqFrame</span><span class="p">(</span><span class="n">frameSize_</span><span class="p">,</span><span class="n">true</span><span class="p">);</span>

         <span class="o">//</span> <span class="n">Unlike</span> <span class="n">the</span> <span class="n">python</span> <span class="n">API</span> <span class="n">we</span> <span class="n">must</span> <span class="n">now</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">new</span> <span class="n">payload</span> <span class="n">size</span>
         <span class="n">frame</span><span class="o">-&gt;</span><span class="n">setPayload</span><span class="p">(</span><span class="n">frameSize_</span><span class="p">);</span>

         <span class="o">//</span> <span class="n">Set</span> <span class="n">an</span> <span class="n">incrementing</span> <span class="n">value</span> <span class="n">to</span> <span class="n">the</span> <span class="n">first</span> <span class="mi">10</span> <span class="n">locations</span>
         <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
         <span class="k">for</span> <span class="p">(</span> <span class="n">it</span><span class="o">=</span><span class="n">frame</span><span class="o">-&gt;</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">&lt;</span> <span class="n">frame</span><span class="o">-&gt;</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span> <span class="p">)</span> <span class="o">*</span><span class="n">it</span> <span class="o">=</span> <span class="n">x</span><span class="o">++</span><span class="p">;</span>

         <span class="o">//</span><span class="n">Send</span> <span class="n">frame</span>
         <span class="n">sendFrame</span><span class="p">(</span><span class="n">frame</span><span class="p">);</span>

         <span class="o">//</span> <span class="n">Increment</span> <span class="n">frame</span> <span class="n">counter</span>
         <span class="n">frameCount_</span><span class="o">++</span><span class="p">;</span>

         <span class="o">//</span> <span class="n">Increment</span> <span class="n">byte</span>  <span class="n">counter</span>
         <span class="n">byteCount_</span> <span class="o">+=</span> <span class="n">frameSize_</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">//</span> <span class="n">Expose</span> <span class="n">methods</span> <span class="n">to</span> <span class="n">python</span>
      <span class="n">static</span> <span class="n">void</span> <span class="n">setup_python</span><span class="p">()</span> <span class="p">{</span>
         <span class="n">boost</span><span class="p">::</span><span class="n">python</span><span class="p">::</span><span class="n">class_</span><span class="o">&lt;</span><span class="n">MyCustomMaster</span><span class="p">,</span> <span class="n">boost</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">MyCustomMaster</span><span class="o">&gt;</span><span class="p">,</span>
                                               <span class="n">boost</span><span class="p">::</span><span class="n">python</span><span class="p">::</span><span class="n">bases</span><span class="o">&lt;</span><span class="n">rogue</span><span class="p">::</span><span class="n">interfaces</span><span class="p">::</span><span class="n">stream</span><span class="p">::</span><span class="n">Master</span><span class="o">&gt;</span><span class="p">,</span>
                                               <span class="n">boost</span><span class="p">::</span><span class="n">noncopyable</span> <span class="o">&gt;</span><span class="p">(</span><span class="s2">&quot;MyCustomMaster&quot;</span><span class="p">,</span>
                                               <span class="n">boost</span><span class="p">::</span><span class="n">python</span><span class="p">::</span><span class="n">init</span><span class="o">&lt;&gt;</span><span class="p">())</span>
            <span class="o">.</span><span class="n">def</span><span class="p">(</span><span class="s2">&quot;getFrameCount&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">MyCustomMaster</span><span class="p">::</span><span class="n">getFrameCount</span><span class="p">)</span>
            <span class="o">.</span><span class="n">def</span><span class="p">(</span><span class="s2">&quot;getTotalBytes&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">MyCustomMaster</span><span class="p">::</span><span class="n">getTotalBytes</span><span class="p">)</span>
            <span class="o">.</span><span class="n">def</span><span class="p">(</span><span class="s2">&quot;setFrameSize&quot;</span><span class="p">,</span>  <span class="o">&amp;</span><span class="n">MyCustomMaster</span><span class="p">::</span><span class="n">setFrameSize</span><span class="p">)</span>
            <span class="o">.</span><span class="n">def</span><span class="p">(</span><span class="s2">&quot;getFrameSize&quot;</span><span class="p">,</span>  <span class="o">&amp;</span><span class="n">MyCustomMaster</span><span class="p">::</span><span class="n">getFrameSize</span><span class="p">)</span>
            <span class="o">.</span><span class="n">def</span><span class="p">(</span><span class="s2">&quot;myFrameGen&quot;</span><span class="p">,</span>    <span class="o">&amp;</span><span class="n">MyCustomMaster</span><span class="p">::</span><span class="n">myFrameGen</span><span class="p">)</span>
         <span class="p">;</span>
         <span class="n">boost</span><span class="p">::</span><span class="n">python</span><span class="p">::</span><span class="n">implicitly_convertible</span><span class="o">&lt;</span><span class="n">boost</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">MyCustomMaster</span><span class="o">&gt;</span><span class="p">,</span>
                                               <span class="n">rogue</span><span class="p">::</span><span class="n">interfaces</span><span class="p">::</span><span class="n">stream</span><span class="p">::</span><span class="n">MasterPtr</span><span class="o">&gt;</span><span class="p">();</span>
      <span class="p">};</span>
<span class="p">};</span>

<span class="o">//</span> <span class="n">Setup</span> <span class="n">this</span> <span class="n">module</span> <span class="ow">in</span> <span class="n">python</span>
<span class="n">BOOST_PYTHON_MODULE</span><span class="p">(</span><span class="n">MyModule</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">PyEval_InitThreads</span><span class="p">();</span>
   <span class="k">try</span> <span class="p">{</span>
      <span class="n">MyCustomSlave</span><span class="p">::</span><span class="n">setup_python</span><span class="p">();</span>
      <span class="n">MyCustomMaster</span><span class="p">::</span><span class="n">setup_python</span><span class="p">();</span>
   <span class="p">}</span> <span class="n">catch</span> <span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;Failed to load module. import rogue first</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
   <span class="p">}</span>
   <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;Loaded my module</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Creating Custom Modules" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="makefile.html" class="btn btn-neutral float-right" title="Building The Custom Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, SLAC National Accelerator Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>