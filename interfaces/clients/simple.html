

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Simple Client Interface &mdash; Rogue v5.6.5-39-g95d44702 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Virtual Client Interface" href="virtual.html" />
    <link rel="prev" title="Using The Command Line Interface" href="commandline.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Rogue
          

          
          </a>

          
            
            
              <div class="version">
                v5.6.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installing/index.html">Installing &amp; Compiling Rogue</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Interfaces</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Client Interfaces</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="commandline.html">Using The Command Line Interface</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Simple Client Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#simpleclient-description">SimpleClient Description</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="virtual.html">Virtual Client Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../stream/index.html">Stream Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../memory/index.html">Memory Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simulation/index.html">Simulation Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html">SQL Logging Interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../utilities/index.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/index.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocols/index.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../logging/index.html">Logging In Rogue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../custom_module/index.html">Creating Custom Modules</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Rogue</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Interfaces</a> &raquo;</li>
        
          <li><a href="index.html">Client Interfaces</a> &raquo;</li>
        
      <li>Simple Client Interface</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/interfaces/clients/simple.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="simple-client-interface">
<span id="interfaces-clients-simple"></span><h1>Simple Client Interface<a class="headerlink" href="#simple-client-interface" title="Permalink to this headline">¶</a></h1>
<p>The Rogue SimpleClient class is a lightweight python class which can be used on its own
with minimal dependencies, requiring only the zmq library. This file is fully portable and
can be used outside of the greater Rogue package.</p>
<p>Most client interfaces will make use of the <a class="reference internal" href="virtual.html#interfaces-clients-virtual"><span class="std std-ref">Virtual Client Interface</span></a> which
provides an exact mirror of the Rogue tree allowing a more powerfull interface to
a running Rogue core. The SimpleClient is targetted towards clients which require only
a limited type of access to top level command and variable access.</p>
<p>The most current file can be downloaded from:</p>
<p><a class="reference external" href="https://github.com/slaclab/rogue/blob/master/python/pyrogue/interfaces/_SimpleClient.py">https://github.com/slaclab/rogue/blob/master/python/pyrogue/interfaces/_SimpleClient.py</a></p>
<p>Below is an example of using the SimpleClient in a python script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">SimpleClient</span><span class="p">(</span><span class="n">addr</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9099</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>

   <span class="c1"># Get a variable value with a read, this returns the native value</span>
   <span class="n">ret</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;root.RogueVersion&quot;</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Version = </span><span class="si">{</span><span class="n">ret</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

   <span class="c1"># Get the string representation a variable value with a read</span>
   <span class="n">ret</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">getDisp</span><span class="p">(</span><span class="s2">&quot;root.RogueVersion&quot;</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Version = </span><span class="si">{</span><span class="n">ret</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

   <span class="c1"># Get a variable value without a read, this returns the native value</span>
   <span class="n">ret</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;root.RogueVersion&quot;</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Version = </span><span class="si">{</span><span class="n">ret</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

   <span class="c1"># Get the string representation a variable value without a read</span>
   <span class="n">ret</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">valueDisp</span><span class="p">(</span><span class="s2">&quot;root.RogueVersion&quot;</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Version = </span><span class="si">{</span><span class="n">ret</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

   <span class="c1"># Set a variable value using the native value</span>
   <span class="n">client</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;root.AxiVersion.ScratchPad&quot;</span><span class="p">,</span><span class="mh">0x100</span><span class="p">)</span>

   <span class="c1"># Set a variable value using the string representation of the value</span>
   <span class="n">client</span><span class="o">.</span><span class="n">setDisp</span><span class="p">(</span><span class="s2">&quot;root.AxiVersion.ScratchPad&quot;</span><span class="p">,</span><span class="s2">&quot;0x100&quot;</span><span class="p">)</span>

   <span class="c1"># Execute a command with an optional argument, passing either the native or string value</span>
   <span class="n">client</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;root.SomeCommand&quot;</span><span class="p">,</span><span class="s2">&quot;0x100&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The SimpleClient interface also provides a mechanism to provide a callback function which is
called anytime a Rogue variable is updated. The call back function is called once for each
of the updated variables reported by the Rogue server.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">myCallBack</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got updated value for </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="k">with</span> <span class="n">SimpleClient</span><span class="p">(</span><span class="n">addr</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9099</span><span class="p">,</span><span class="n">cb</span><span class="o">=</span><span class="n">myCallBack</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>

   <span class="c1"># Any variale updates received while this interface is activate will</span>
   <span class="c1"># be passed to the myCallBack function</span>
</pre></div>
</div>
<div class="section" id="simpleclient-description">
<h2>SimpleClient Description<a class="headerlink" href="#simpleclient-description" title="Permalink to this headline">¶</a></h2>
<p>The class description for the SimpleClient class is included below:</p>
<dl class="py class">
<dt id="pyrogue.interfaces.SimpleClient">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">pyrogue.interfaces.</span></code><code class="sig-name descname"><span class="pre">SimpleClient</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">addr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'localhost'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9099</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyrogue/interfaces/_SimpleClient.html#SimpleClient"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyrogue.interfaces.SimpleClient" title="Permalink to this definition">¶</a></dt>
<dd><p>A lightweight client inerface for Rogue. This can be used in
scripts or as an interface to Rogue in matlab. For a more
powerfull, tree access capable client. Please see the
VirtualClient class.</p>
<p>To use in Matlab first you need the zmq package in your  python installation:</p>
<p>&gt; pip install zmq</p>
<p>&gt; pip install matlab</p>
<p>You then need to set the appropriate flags in Matlab to load the zmq module:</p>
<p>&gt;&gt; py.sys.setdlopenflags(int32(bitor(2, 8)));</p>
<p>&gt;&gt; c = py.SimpleClient.SimpleClient(“localhost”,9099);</p>
<p>&gt;&gt; c.get(“dummyTree.Time”)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>addr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – host address</p></li>
<li><p><strong>port</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – host port</p></li>
<li><p><strong>cb</strong> (<em>obj</em>) – call back function for variable updates, in the form func(path,value)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="pyrogue.interfaces.SimpleClient._stop">
<code class="sig-name descname"><span class="pre">_stop</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyrogue/interfaces/_SimpleClient.html#SimpleClient._stop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyrogue.interfaces.SimpleClient._stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop the SimpleClient interface.
This must be called if not not using the SimpleClient in a context</p>
</dd></dl>

<dl class="py method">
<dt id="pyrogue.interfaces.SimpleClient.get">
<code class="sig-name descname"><span class="pre">get</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyrogue/interfaces/_SimpleClient.html#SimpleClient.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyrogue.interfaces.SimpleClient.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a variable value, initating a read</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Path of the variable to return a value for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Variable value in native form</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>obj</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyrogue.interfaces.SimpleClient.getDisp">
<code class="sig-name descname"><span class="pre">getDisp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyrogue/interfaces/_SimpleClient.html#SimpleClient.getDisp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyrogue.interfaces.SimpleClient.getDisp" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a variable value, in string form, initating a read</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Path of the variable to return a value for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Variable value in string form</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyrogue.interfaces.SimpleClient.value">
<code class="sig-name descname"><span class="pre">value</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyrogue/interfaces/_SimpleClient.html#SimpleClient.value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyrogue.interfaces.SimpleClient.value" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a variable value, without initating a read</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Path of the variable to return a value for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Variable value</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>obj</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyrogue.interfaces.SimpleClient.valueDisp">
<code class="sig-name descname"><span class="pre">valueDisp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyrogue/interfaces/_SimpleClient.html#SimpleClient.valueDisp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyrogue.interfaces.SimpleClient.valueDisp" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a variable value, in string form, without initating a read</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Path of the variable to return a value for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Variable value in string form</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyrogue.interfaces.SimpleClient.set">
<code class="sig-name descname"><span class="pre">set</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyrogue/interfaces/_SimpleClient.html#SimpleClient.set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyrogue.interfaces.SimpleClient.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a variable value, using its native type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Path of the variable to set</p></li>
<li><p><strong>value</strong> (<em>obj</em>) – Value to set</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyrogue.interfaces.SimpleClient.setDisp">
<code class="sig-name descname"><span class="pre">setDisp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyrogue/interfaces/_SimpleClient.html#SimpleClient.setDisp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyrogue.interfaces.SimpleClient.setDisp" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a variable value, using a string representation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Path of the variable to set</p></li>
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Value to set</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyrogue.interfaces.SimpleClient.exec">
<code class="sig-name descname"><span class="pre">exec</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyrogue/interfaces/_SimpleClient.html#SimpleClient.exec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyrogue.interfaces.SimpleClient.exec" title="Permalink to this definition">¶</a></dt>
<dd><p>Call a command, with the optional arg</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Path of the variable to set</p></li>
<li><p><strong>arg</strong> (<em>obj</em>) – Command argument, in native or string form</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return value of the underlying command</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>obj</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="virtual.html" class="btn btn-neutral float-right" title="Virtual Client Interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="commandline.html" class="btn btn-neutral float-left" title="Using The Command Line Interface" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, SLAC National Accelerator Laboratory.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>