<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reading Frames From A File &mdash; Rogue v6.1.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=d7291d41"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Custom Writers" href="custom.html" />
    <link rel="prev" title="Writing Frames To A File" href="writing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Rogue
          </a>
              <div class="version">
                v6.1.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installing/index.html">Installing &amp; Compiling Rogue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../interfaces/index.html">Interfaces</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Utilities</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">File I/O Utilities</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="writing.html">Writing Frames To A File</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Reading Frames From A File</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom.html">Custom Writers</a></li>
<li class="toctree-l3"><a class="reference internal" href="python_reader.html">Python File Reader</a></li>
<li class="toctree-l3"><a class="reference internal" href="classes/index.html">File Operation Classes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../prbs/index.html">PRBS Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compression/index.html">Compression Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/index.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocols/index.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../logging/index.html">Logging In Rogue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../custom_module/index.html">Creating Custom Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pydm/index.html">Using the PyDM Gui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration/index.html">Migration Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Rogue</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Utilities</a></li>
          <li class="breadcrumb-item"><a href="index.html">File I/O Utilities</a></li>
      <li class="breadcrumb-item active">Reading Frames From A File</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/utilities/fileio/reading.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="reading-frames-from-a-file">
<span id="utilities-fileio-reading"></span><h1>Reading Frames From A File<a class="headerlink" href="#reading-frames-from-a-file" title="Permalink to this heading"></a></h1>
<p>Frames can be read in a streaming fashion using the <a class="reference internal" href="classes/reader.html#utilities-fileio-reader"><span class="std std-ref">StreamReader</span></a> class. This
class will output frames using the standard stream interface, with a Frame object created for
each data blob in the Frame, with the same format and with the same flags when it was originally
written. Since multiple “channels” may have been used when writing the file, generated frames will
be tagged with a channel ID to match the channel value when written. A <a class="reference internal" href="../../interfaces/stream/classes/filter.html#interfaces-stream-filter"><span class="std std-ref">Filter</span></a>
object can be used to direct the Frames based upon their channel IDs.</p>
<p>There is also a python utilitiy for reading frames in python using a non-streaming method.</p>
<p>The following code block describes how to create and connect a file reader in python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyrogue</span>
<span class="kn">import</span> <span class="nn">rogue.utilities.fileio</span>

<span class="c1"># First we create a file reader instance</span>
<span class="n">fread</span> <span class="o">=</span> <span class="n">rogue</span><span class="o">.</span><span class="n">utilities</span><span class="o">.</span><span class="n">fileio</span><span class="o">.</span><span class="n">StreamReader</span><span class="p">()</span>

<span class="c1"># Assuming we already have a frame receiver, we can connect the reader</span>
<span class="c1"># instance to the receiver</span>
<span class="n">receiver</span> <span class="o">&lt;&lt;</span> <span class="n">fread</span>

<span class="c1"># We can then open the file. As soon as the file is opened the read frames</span>
<span class="c1"># will be streamed to the receiver until all frames are read. If the file</span>
<span class="c1"># was written using the maxSize attribute, you can include the index of the</span>
<span class="c1"># first file, and all of the seperate files in the split sequence will be written</span>
<span class="c1"># in order:</span>
<span class="n">fread</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;myFile.dat.1&quot;</span><span class="p">)</span>

<span class="c1"># After all of the files are read, you can then close the file. The closeWait() command</span>
<span class="c1"># is a blocking command that will wait until all the frames are read, and then close() the</span>
<span class="c1"># file</span>
<span class="n">fread</span><span class="o">.</span><span class="n">closeWait</span><span class="p">()</span>
</pre></div>
</div>
<p>A Rogue Device wrapper is provided for including the StreamReader class as part of the Rogue tree. This allows the StreamReader to be
present in the Rogue PyDM GUI, providing an interface for opening and closing files.</p>
<p>The following code is an example of using the Rogue StreamReader wrapper in the Rogue tree.</p>
<p>TODO python class reference</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyrogue</span>
<span class="kn">import</span> <span class="nn">pyrogue.utilities.fileio</span>

<span class="c1"># First we create a file reader instance, use the python wrapper</span>
<span class="n">fread</span> <span class="o">=</span> <span class="n">pyrogue</span><span class="o">.</span><span class="n">utilities</span><span class="o">.</span><span class="n">fileio</span><span class="o">.</span><span class="n">StreamReader</span><span class="p">()</span>

<span class="c1"># Add the file reader to the Rogue tree.</span>
<span class="n">root</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">fread</span><span class="p">)</span>

<span class="c1"># Assuming we already have a frame receiver, we can connect the reader</span>
<span class="c1"># instance to the receiver</span>
<span class="n">receiver</span> <span class="o">&lt;&lt;</span> <span class="n">fread</span>
</pre></div>
</div>
<p>The following code shows how to use a StreamReader in c++.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;rogue/utilities/fileio/StreamReader.h&gt;</span>

<span class="c1">// First we create a file reader instance</span>
<span class="n">rogue</span><span class="o">::</span><span class="n">utilities</span><span class="o">::</span><span class="n">fileio</span><span class="o">::</span><span class="n">StreamReaderPtr</span><span class="w"> </span><span class="n">fwrite</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rogue</span><span class="o">::</span><span class="n">utilities</span><span class="o">::</span><span class="n">fileio</span><span class="o">::</span><span class="n">StreamReaderPtr</span><span class="o">::</span><span class="n">create</span><span class="p">();</span>

<span class="c1">// Connect the reader to an existing receiver</span>
<span class="n">receiver</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">fread</span><span class="p">;</span>

<span class="c1">// Open the data file</span>
<span class="n">fread</span><span class="o">-&gt;</span><span class="n">open</span><span class="p">(</span><span class="s">&quot;myFile.dat.1&quot;</span><span class="p">);</span>

<span class="c1">// Close the data file after all frames are read</span>
<span class="n">fread</span><span class="o">-&gt;</span><span class="n">closeWait</span><span class="p">();</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="writing.html" class="btn btn-neutral float-left" title="Writing Frames To A File" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="custom.html" class="btn btn-neutral float-right" title="Custom Writers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, SLAC National Accelerator Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>